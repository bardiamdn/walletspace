'use client';
import React, { useLayoutEffect, useEffect, useRef } from 'react';
import { gsap } from 'gsap';
// import LocomotiveScroll from 'locomotive-scroll';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

import styles from './style.module.css';

export default function Index() {
  const leftDiamondRef = useRef<SVGPathElement | null>(null);
  const rightDiamondRef = useRef<SVGPathElement | null>(null);
  const shadowRef = useRef<SVGPathElement | null>(null);

  // const scrollRef = useRef(null);
  const containerRef = useRef(null);
  const directionRef = useRef(1);

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);

    gsap.to(containerRef.current, {
      scrollTrigger: {
        trigger: document.body,
        start: 0,
        end: window.innerHeight,
        onUpdate: (e) => {
          directionRef.current = e.direction;
          requestAnimationFrame(animate);
        },
      },
    });

    const animate = () => {
      if (directionRef.current === 1) {
        gsap.to(containerRef.current, {
          y: '-100%',
          duration: 0.3,
          ease: 'power2.out',
        });
      } else if (directionRef.current === -1) {
        // Scrolling up
        gsap.to(containerRef.current, {
          y: '0%',
          duration: 0.3,
          ease: 'power2.out',
        });
      }
      // requestAnimationFrame(animate);
    };

    const svgContainer = document.getElementById('svgContainer');

    // Define the animation timeline
    const animationEnter = gsap
      .timeline({ paused: true })
      .to([rightDiamondRef.current, shadowRef.current], {
        x: -20,
        duration: 0.25,
        ease: 'power1.inOut',
      })
      .to(
        leftDiamondRef.current,
        { x: 20, duration: 0.25, ease: 'power1.inOut' },
        '<'
      );
    const animationLeave = gsap
      .timeline({ paused: true })
      .to([rightDiamondRef.current, shadowRef.current], {
        x: 0,
        duration: 0.25,
        ease: 'power1.inOut',
      })
      .to(
        leftDiamondRef.current,
        { x: 0, duration: 0.25, ease: 'power1.inOut' },
        '<'
      );

    const handleMouseEnter = () => {
      if (animationLeave.isActive()) {
        animationLeave.pause();
        animationLeave.kill();
      }
      animationEnter.play(0);
    };

    const handleMouseLeave = () => {
      if (animationEnter.isActive()) {
        animationEnter.pause();
        animationEnter.kill();
      }
      animationLeave.play(0);
    };

    // Add event listeners
    if (svgContainer) {
      svgContainer.addEventListener('mouseenter', handleMouseEnter);
      svgContainer.addEventListener('mouseleave', handleMouseLeave);
    }

    // Cleanup event listeners on component unmount
    return () => {
      if (svgContainer) {
        svgContainer.removeEventListener('mouseenter', handleMouseEnter);
        svgContainer.removeEventListener('mouseleave', handleMouseLeave);
      }

      //   // kill scroll trigger
      //   ScrollTrigger.getAll().forEach((trigger) => trigger.kill());
    };
  }, []);
  return (
    <header className={styles.headerContainer} ref={containerRef}>
      <div id="svgContainer" className="flex items-center border-white">
        <svg
          width="46.1"
          height="35.6"
          viewBox="0 0 461 356"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="mr-1"
        >
          <path
            ref={rightDiamondRef}
            d="M184.542 207.865C172.406 190.347 172.366 166.876 184.441 149.315L270.982 23.4542C278.846 12.0174 295.372 12.0173 303.236 23.4541L389.778 149.315C401.853 166.876 401.812 190.347 389.676 207.865L303.196 332.695C295.327 344.053 278.892 344.053 271.023 332.694L184.542 207.865Z"
            fill="#2E93AB"
          />
          <path
            ref={shadowRef}
            d="M254.925 309.425L230.534 274.324L270.82 216.27L254.925 309.425Z"
            fill="#1B7488"
          />
          <path
            ref={leftDiamondRef}
            d="M71.306 207.954C59.1721 190.435 59.1315 166.96 71.2049 149.396L157.716 23.543C165.579 12.1046 182.103 12.1046 189.966 23.543L276.477 149.396C288.551 166.96 288.51 190.435 276.376 207.954L189.925 332.777C182.057 344.137 165.625 344.137 157.757 332.777L71.306 207.954Z"
            fill="#43BCD8"
          />
        </svg>
        <svg
          width="116.6"
          height="20.1"
          viewBox="0 0 1166 201"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M151.477 152H117.102L99.5234 81.5898C99.263 80.6133 98.9375 79.2461 98.5469 77.4883C98.2214 75.7305 97.8307 73.7448 97.375 71.5312C96.9193 69.3177 96.4635 67.0065 96.0078 64.5977C95.5521 62.1888 95.1289 59.8451 94.7383 57.5664C94.3477 55.2878 93.9896 53.2044 93.6641 51.3164C93.4036 49.3633 93.2083 47.8008 93.0781 46.6289C92.9479 47.8008 92.7201 49.3633 92.3945 51.3164C92.1341 53.2044 91.8086 55.2878 91.418 57.5664C91.0273 59.7799 90.6042 62.0911 90.1484 64.5C89.7578 66.9089 89.3346 69.2201 88.8789 71.4336C88.4883 73.6471 88.0977 75.6654 87.707 77.4883C87.3164 79.3112 86.9909 80.7435 86.7305 81.7852L69.3477 152H34.875L0.5 9.22656H30.2852L46.4961 87.1562C46.6914 88.1979 46.9518 89.7279 47.2773 91.7461C47.668 93.6992 48.0911 95.9128 48.5469 98.3867C49.0026 100.861 49.4583 103.465 49.9141 106.199C50.4349 108.934 50.9232 111.603 51.3789 114.207C51.8346 116.811 52.2578 119.253 52.6484 121.531C53.0391 123.745 53.332 125.568 53.5273 127C53.7227 125.568 53.9831 123.745 54.3086 121.531C54.6992 119.318 55.0898 116.974 55.4805 114.5C55.8711 111.961 56.2943 109.357 56.75 106.688C57.2708 104.018 57.7266 101.544 58.1172 99.2656C58.5078 96.9219 58.8659 94.8711 59.1914 93.1133C59.582 91.2904 59.875 89.9883 60.0703 89.207L79.8945 9.22656H106.457L126.281 89.207C126.477 89.9883 126.737 91.2904 127.062 93.1133C127.453 94.8711 127.844 96.9219 128.234 99.2656C128.69 101.544 129.146 104.018 129.602 106.688C130.057 109.357 130.48 111.961 130.871 114.5C131.327 116.974 131.717 119.318 132.043 121.531C132.434 123.745 132.727 125.568 132.922 127C133.117 125.568 133.378 123.745 133.703 121.531C134.094 119.253 134.517 116.811 134.973 114.207C135.428 111.603 135.884 108.934 136.34 106.199C136.861 103.465 137.349 100.861 137.805 98.3867C138.26 95.9128 138.651 93.6992 138.977 91.7461C139.367 89.7279 139.66 88.1979 139.855 87.1562L156.066 9.22656H185.852L151.477 152ZM260.754 152L254.992 137.156H254.113C251.965 140.086 249.816 142.625 247.668 144.773C245.52 146.857 243.176 148.582 240.637 149.949C238.098 151.316 235.233 152.326 232.043 152.977C228.918 153.628 225.272 153.953 221.105 153.953C216.678 153.953 212.577 153.27 208.801 151.902C205.025 150.47 201.737 148.354 198.938 145.555C196.203 142.69 194.055 139.109 192.492 134.812C190.93 130.451 190.148 125.307 190.148 119.383C190.148 107.794 193.859 99.2656 201.281 93.7969C208.703 88.263 219.803 85.2031 234.582 84.6172L251.965 84.0312V75.8281C251.965 71.3359 250.663 68.0156 248.059 65.8672C245.454 63.7188 241.809 62.6445 237.121 62.6445C232.434 62.6445 227.844 63.3281 223.352 64.6953C218.924 66.0625 214.465 67.8854 209.973 70.1641L200.305 50.4375C205.773 47.3776 211.828 44.9688 218.469 43.2109C225.109 41.4531 232.076 40.5742 239.367 40.5742C252.974 40.5742 263.391 43.7643 270.617 50.1445C277.909 56.5247 281.555 66.2253 281.555 79.2461V152H260.754ZM251.965 101.414L242.102 101.805C238.13 101.935 234.777 102.456 232.043 103.367C229.309 104.279 227.095 105.516 225.402 107.078C223.775 108.576 222.57 110.398 221.789 112.547C221.073 114.63 220.715 116.974 220.715 119.578C220.715 124.135 221.822 127.391 224.035 129.344C226.249 131.232 229.146 132.176 232.727 132.176C235.461 132.176 238 131.72 240.344 130.809C242.688 129.832 244.706 128.432 246.398 126.609C248.156 124.721 249.523 122.443 250.5 119.773C251.477 117.039 251.965 113.914 251.965 110.398V101.414ZM342.004 152H312.219V0.046875H342.004V152ZM403.137 152H373.352V0.046875H403.137V152ZM478.625 61.9609C473.352 61.9609 468.957 63.8164 465.441 67.5273C461.991 71.2383 460.005 77.0651 459.484 85.0078H497.473C497.408 81.6875 496.984 78.6276 496.203 75.8281C495.422 73.0286 494.25 70.6198 492.688 68.6016C491.125 66.5182 489.172 64.8906 486.828 63.7188C484.484 62.5469 481.75 61.9609 478.625 61.9609ZM482.434 153.953C474.621 153.953 467.427 152.814 460.852 150.535C454.276 148.257 448.612 144.839 443.859 140.281C439.107 135.659 435.396 129.865 432.727 122.898C430.122 115.867 428.82 107.632 428.82 98.1914C428.82 88.6211 430.025 80.2552 432.434 73.0938C434.842 65.9323 438.195 59.9753 442.492 55.2227C446.854 50.4049 452.062 46.7917 458.117 44.3828C464.237 41.974 471.008 40.7695 478.43 40.7695C485.656 40.7695 492.167 41.8763 497.961 44.0898C503.82 46.2383 508.768 49.4284 512.805 53.6602C516.906 57.8919 520.031 63.1003 522.18 69.2852C524.393 75.4049 525.5 82.4362 525.5 90.3789V104.832H458.898C459.029 108.999 459.68 112.775 460.852 116.16C462.089 119.48 463.781 122.312 465.93 124.656C468.143 126.935 470.78 128.693 473.84 129.93C476.965 131.167 480.513 131.785 484.484 131.785C487.805 131.785 490.93 131.622 493.859 131.297C496.854 130.906 499.751 130.353 502.551 129.637C505.35 128.921 508.117 128.042 510.852 127C513.586 125.893 516.385 124.624 519.25 123.191V146.238C516.646 147.605 514.009 148.777 511.34 149.754C508.736 150.665 505.969 151.447 503.039 152.098C500.109 152.749 496.952 153.204 493.566 153.465C490.181 153.79 486.47 153.953 482.434 153.953ZM595.031 130.223C597.961 130.223 600.728 129.897 603.332 129.246C606.001 128.595 608.703 127.781 611.438 126.805V148.973C608.638 150.405 605.155 151.577 600.988 152.488C596.887 153.465 592.395 153.953 587.512 153.953C582.759 153.953 578.332 153.4 574.23 152.293C570.129 151.186 566.581 149.266 563.586 146.531C560.591 143.732 558.215 140.021 556.457 135.398C554.764 130.711 553.918 124.852 553.918 117.82V65.1836H539.66V52.5859L556.066 42.625L564.66 19.5781H583.703V42.8203H610.266V65.1836H583.703V117.82C583.703 122.052 584.745 125.177 586.828 127.195C588.911 129.214 591.646 130.223 595.031 130.223ZM714.074 112.352C714.074 118.732 712.967 124.493 710.754 129.637C708.605 134.715 705.415 139.077 701.184 142.723C697.017 146.303 691.874 149.07 685.754 151.023C679.699 152.977 672.733 153.953 664.855 153.953C657.954 153.953 651.281 153.237 644.836 151.805C638.456 150.372 632.531 148.224 627.062 145.359V117.234C630.188 118.732 633.345 120.197 636.535 121.629C639.725 122.996 642.948 124.233 646.203 125.34C649.523 126.447 652.811 127.326 656.066 127.977C659.387 128.628 662.674 128.953 665.93 128.953C669.25 128.953 672.082 128.595 674.426 127.879C676.835 127.098 678.755 126.056 680.188 124.754C681.685 123.387 682.759 121.792 683.41 119.969C684.126 118.081 684.484 116.03 684.484 113.816C684.484 111.147 683.898 108.803 682.727 106.785C681.62 104.702 680.025 102.781 677.941 101.023C675.923 99.2005 673.449 97.4427 670.52 95.75C667.655 94.0573 664.432 92.2669 660.852 90.3789C657.857 88.8164 654.504 86.9284 650.793 84.7148C647.082 82.5013 643.566 79.7669 640.246 76.5117C636.991 73.1914 634.257 69.2201 632.043 64.5977C629.829 59.9102 628.723 54.3112 628.723 47.8008C628.723 41.4206 629.764 35.724 631.848 30.7109C633.996 25.6328 637.023 21.3685 640.93 17.918C644.836 14.4023 649.556 11.7331 655.09 9.91016C660.689 8.08724 666.939 7.17578 673.84 7.17578C677.29 7.17578 680.643 7.40365 683.898 7.85938C687.219 8.3151 690.474 8.96615 693.664 9.8125C696.919 10.6589 700.174 11.7005 703.43 12.9375C706.685 14.1745 710.038 15.6068 713.488 17.2344L703.723 40.7695C700.793 39.4023 698.059 38.1979 695.52 37.1562C692.98 36.1146 690.507 35.2357 688.098 34.5195C685.689 33.8034 683.312 33.2826 680.969 32.957C678.69 32.5664 676.379 32.3711 674.035 32.3711C668.957 32.3711 665.051 33.7383 662.316 36.4727C659.647 39.1419 658.312 42.7227 658.312 47.2148C658.312 49.6237 658.703 51.7721 659.484 53.6602C660.331 55.4831 661.633 57.2083 663.391 58.8359C665.214 60.4635 667.525 62.1237 670.324 63.8164C673.189 65.5091 676.639 67.4297 680.676 69.5781C685.559 72.1823 690.051 74.8516 694.152 77.5859C698.254 80.2552 701.77 83.25 704.699 86.5703C707.694 89.8255 710.005 93.5365 711.633 97.7031C713.26 101.87 714.074 106.753 714.074 112.352ZM795.812 153.953C792.232 153.953 789.009 153.562 786.145 152.781C783.345 152 780.839 150.958 778.625 149.656C776.411 148.354 774.458 146.889 772.766 145.262C771.073 143.569 769.543 141.811 768.176 139.988H766.613C766.874 142.267 767.134 144.415 767.395 146.434C767.59 148.126 767.753 149.884 767.883 151.707C768.078 153.465 768.176 154.832 768.176 155.809V200.047H738.391V42.8203H762.609L766.809 56.9805H768.176C769.543 54.7669 771.105 52.6836 772.863 50.7305C774.621 48.7773 776.639 47.0846 778.918 45.6523C781.262 44.1549 783.898 42.9831 786.828 42.1367C789.758 41.2253 793.013 40.7695 796.594 40.7695C802.258 40.7695 807.401 41.974 812.023 44.3828C816.646 46.7917 820.617 50.3724 823.938 55.125C827.258 59.8776 829.829 65.7695 831.652 72.8008C833.475 79.832 834.387 87.9701 834.387 97.2148C834.387 106.525 833.443 114.728 831.555 121.824C829.667 128.855 826.997 134.78 823.547 139.598C820.161 144.35 816.092 147.931 811.34 150.34C806.652 152.749 801.477 153.953 795.812 153.953ZM786.535 64.5977C783.215 64.5977 780.383 65.2161 778.039 66.4531C775.76 67.625 773.905 69.4154 772.473 71.8242C771.04 74.2331 769.999 77.293 769.348 81.0039C768.697 84.6497 768.306 88.9141 768.176 93.7969V97.0195C768.176 102.293 768.469 106.98 769.055 111.082C769.706 115.184 770.747 118.634 772.18 121.434C773.612 124.168 775.5 126.251 777.844 127.684C780.253 129.116 783.215 129.832 786.73 129.832C792.655 129.832 796.984 127.033 799.719 121.434C802.518 115.77 803.918 107.566 803.918 96.8242C803.918 86.082 802.518 78.0417 799.719 72.7031C796.984 67.2995 792.59 64.5977 786.535 64.5977ZM923.449 152L917.688 137.156H916.809C914.66 140.086 912.512 142.625 910.363 144.773C908.215 146.857 905.871 148.582 903.332 149.949C900.793 151.316 897.928 152.326 894.738 152.977C891.613 153.628 887.967 153.953 883.801 153.953C879.374 153.953 875.272 153.27 871.496 151.902C867.72 150.47 864.432 148.354 861.633 145.555C858.898 142.69 856.75 139.109 855.188 134.812C853.625 130.451 852.844 125.307 852.844 119.383C852.844 107.794 856.555 99.2656 863.977 93.7969C871.398 88.263 882.499 85.2031 897.277 84.6172L914.66 84.0312V75.8281C914.66 71.3359 913.358 68.0156 910.754 65.8672C908.15 63.7188 904.504 62.6445 899.816 62.6445C895.129 62.6445 890.539 63.3281 886.047 64.6953C881.62 66.0625 877.16 67.8854 872.668 70.1641L863 50.4375C868.469 47.3776 874.523 44.9688 881.164 43.2109C887.805 41.4531 894.771 40.5742 902.062 40.5742C915.669 40.5742 926.086 43.7643 933.312 50.1445C940.604 56.5247 944.25 66.2253 944.25 79.2461V152H923.449ZM914.66 101.414L904.797 101.805C900.826 101.935 897.473 102.456 894.738 103.367C892.004 104.279 889.79 105.516 888.098 107.078C886.47 108.576 885.266 110.398 884.484 112.547C883.768 114.63 883.41 116.974 883.41 119.578C883.41 124.135 884.517 127.391 886.73 129.344C888.944 131.232 891.841 132.176 895.422 132.176C898.156 132.176 900.695 131.72 903.039 130.809C905.383 129.832 907.401 128.432 909.094 126.609C910.852 124.721 912.219 122.443 913.195 119.773C914.172 117.039 914.66 113.914 914.66 110.398V101.414ZM1020.32 153.953C1012.51 153.953 1005.45 152.879 999.133 150.73C992.883 148.582 987.512 145.262 983.02 140.77C978.592 136.212 975.174 130.418 972.766 123.387C970.422 116.29 969.25 107.827 969.25 97.9961C969.25 87.1237 970.454 78.0417 972.863 70.75C975.337 63.3932 978.788 57.5013 983.215 53.0742C987.707 48.6471 993.078 45.4896 999.328 43.6016C1005.64 41.7135 1012.64 40.7695 1020.32 40.7695C1025.92 40.7695 1031.49 41.4531 1037.02 42.8203C1042.56 44.1875 1047.77 46.1081 1052.65 48.582L1044.05 71.2383C1039.76 69.3503 1035.62 67.8203 1031.65 66.6484C1027.68 65.4115 1023.9 64.793 1020.32 64.793C1013.1 64.793 1007.86 67.5599 1004.6 73.0938C1001.35 78.5625 999.719 86.7982 999.719 97.8008C999.719 108.738 1001.35 116.811 1004.6 122.02C1007.86 127.228 1012.97 129.832 1019.93 129.832C1025.6 129.832 1030.74 129.116 1035.36 127.684C1039.99 126.186 1044.71 124.298 1049.52 122.02V146.824C1047.11 147.996 1044.77 149.038 1042.49 149.949C1040.21 150.861 1037.9 151.609 1035.56 152.195C1033.28 152.781 1030.87 153.204 1028.33 153.465C1025.86 153.79 1023.19 153.953 1020.32 153.953ZM1118.86 61.9609C1113.59 61.9609 1109.19 63.8164 1105.68 67.5273C1102.23 71.2383 1100.24 77.0651 1099.72 85.0078H1137.71C1137.64 81.6875 1137.22 78.6276 1136.44 75.8281C1135.66 73.0286 1134.48 70.6198 1132.92 68.6016C1131.36 66.5182 1129.41 64.8906 1127.06 63.7188C1124.72 62.5469 1121.98 61.9609 1118.86 61.9609ZM1122.67 153.953C1114.86 153.953 1107.66 152.814 1101.09 150.535C1094.51 148.257 1088.85 144.839 1084.09 140.281C1079.34 135.659 1075.63 129.865 1072.96 122.898C1070.36 115.867 1069.05 107.632 1069.05 98.1914C1069.05 88.6211 1070.26 80.2552 1072.67 73.0938C1075.08 65.9323 1078.43 59.9753 1082.73 55.2227C1087.09 50.4049 1092.3 46.7917 1098.35 44.3828C1104.47 41.974 1111.24 40.7695 1118.66 40.7695C1125.89 40.7695 1132.4 41.8763 1138.2 44.0898C1144.05 46.2383 1149 49.4284 1153.04 53.6602C1157.14 57.8919 1160.27 63.1003 1162.41 69.2852C1164.63 75.4049 1165.73 82.4362 1165.73 90.3789V104.832H1099.13C1099.26 108.999 1099.91 112.775 1101.09 116.16C1102.32 119.48 1104.02 122.312 1106.16 124.656C1108.38 126.935 1111.01 128.693 1114.07 129.93C1117.2 131.167 1120.75 131.785 1124.72 131.785C1128.04 131.785 1131.16 131.622 1134.09 131.297C1137.09 130.906 1139.99 130.353 1142.79 129.637C1145.58 128.921 1148.35 128.042 1151.09 127C1153.82 125.893 1156.62 124.624 1159.48 123.191V146.238C1156.88 147.605 1154.24 148.777 1151.57 149.754C1148.97 150.665 1146.2 151.447 1143.27 152.098C1140.34 152.749 1137.19 153.204 1133.8 153.465C1130.42 153.79 1126.7 153.953 1122.67 153.953Z"
            fill="#252525"
          />
        </svg>
      </div>
      <div className={styles.link}>
        <a
          className="font-semibold"
          href="https://x.com/thewalletspace"
          target="_blank"
          rel="noopener noreferrer"
        >
          X (Twitter)
        </a>
      </div>
    </header>
  );
}
